syntax = "proto3";

package payments.v1;

import "financial/v1/invoice.proto";
import "google/protobuf/timestamp.proto";
import "payments/v1/cash_receipt.proto";
import "payments/v1/gift_voucher.proto";
import "payments/v1/payment_utils.proto";
import "payments/v1/payments.proto";

service PointOfSaleService {
  // Create a cash receipt (most common - 95% of transactions)
  rpc CreateCashReceipt(CreateCashReceiptRequest) returns (CreateCashReceiptResponse);

  // Use gift voucher in payment
  rpc PayWithVoucher(PayWithVoucherRequest) returns (PayWithVoucherResponse);

  // Get daily sales summary for a cashier
  rpc GetCashierDailySummary(GetCashierDailySummaryRequest) returns (GetCashierDailySummaryResponse);
}

message CreateCashReceiptRequest {
  // The partial cash receipt to create.
  CashReceipt receipt = 1;

  // Issue voucher on change
  // If true and change_given > 0, issue a voucher instead of cash
  bool issue_voucher_on_change = 2;
}

message CreateCashReceiptResponse {
  // The created cash receipt.
  bool success = 1;

  optional GiftVoucher voucher_id = 2; // If a voucher was issued
}
